<div class="my-list-page" ng-init="loadData()">
    <div class="container">
        <div class="row text-center">
            <div class="col-md-12">
                <h1 class="my-list-header">My List</h1>
            </div>
        </div>
        <div class="watched-list" ng-if="watched.length > 0">
            <div class="row">
                <div class="col-md-10 col-md-offset-1">
                    <h2>Watched:</h2>
                </div>
            </div>
            <div class="row text-center">
                <div class="col-md-10 col-md-offset-1 table-responsive">
                    <table class="table">
                        <tr>
                            <th class="text-center">#</th>
                            <th class="text-center">Title</th>
                            <th class="text-center">Date</th>
                            <th class="text-center">Rating</th>
                            <th class="text-center">Comment</th>
                            <th class="text-center" ng-if="watchedStatus">Status</th>
                            <th class="text-center">Edit</th>
                            <th class="text-center">Delete</th>
                        </tr>
                        <tbody ng-repeat="movie in watched">
                            <tr ng-if="!movie.isEdit">
                                <td>
                                    {{$index + 1}}
                                </td>
                                <td>
                                    {{movie.title}}
                                </td>
                                <td>
                                    {{movie.date | date:'MM/dd/yyyy'}}
                                </td>
                                <td>
                                    {{movie.rate}}
                                </td>
                                <td>
                                    {{movie.Comment}}
                                </td>
                                <td ng-if="watchedStatus">
                                    {{movie.status}}
                                </td>
                                <td>
                                    <button ng-click="editWatch($index)" class="btn btn-success btn-sm">
                                        <i class="glyphicon glyphicon-edit"></i>
                                    </button>
                                </td>
                                <td>
                                    <button ng-click="deleteWatch($index)" class="btn btn-danger btn-sm">
                                        <i class="glyphicon glyphicon-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr ng-if="movie.isEdit">
                                <td>
                                    {{$index + 1}}
                                </td>
                                <td>
                                    {{movie.title}}
                                </td>
                                <td>
                                    <input class="form-control" ng-model="movie.date" type="date">
                                </td>
                                <td>
                                    <select ng-model="movie.rate" class="form-control">
                                        <option>1</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5</option>
                                        <option>6</option>
                                        <option>7</option>
                                        <option>8</option>
                                        <option>9</option>
                                        <option>10</option>
                                    </select>
                                </td>
                                <td>
                                    <input class="form-control" ng-model="movie.comment" maxlength="30" type="text">
                                </td>
                                <td>
                                    <select class="form-control" ng-model="movie.status">
                                        <option value="Watched">
                                            Watched
                                        </option>
                                        <option value="Plan to watch">
                                            Plan to watch
                                        </option>
                                    </select>
                                </td>
                                <td>
                                    <button ng-click="saveWatch($index)" class="btn btn-success btn-sm">
                                        <i class="glyphicon glyphicon-edit"></i>
                                    </button>
                                </td>
                                <td>
                                    <button ng-click="deleteWatch($index)" class="btn btn-danger btn-sm">
                                        <i class="glyphicon glyphicon-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="plan-to-watch-list" ng-if="plan.length > 0">
            <div class="row">
                <div class="col-md-10 col-md-offset-1">
                    <h2>Plan to Watch:</h2>
                </div>
            </div>
            <div class="row text-center">
                <div class="col-md-10 col-md-offset-1 table-responsive">
                    <table class="table">
                        <tr>
                            <th class="text-center">#</th>
                            <th class="text-center">Title</th>
                            <th class="text-center">Date</th>
                            <th class="text-center">Rating</th>
                            <th class="text-center">Comment</th>
                            <th class="text-center" ng-if="planStatus">Status</th>
                            <th class="text-center">Edit</th>
                            <th class="text-center">Delete</th>
                        </tr>
                        <tbody ng-repeat="movie in plan">
                            <tr ng-if="!movie.isEdit">
                                <td>
                                    {{$index + 1}}
                                </td>
                                <td>
                                    {{movie.title}}
                                </td>
                                <td>
                                    {{movie.date | date:'MM/dd/yyyy'}}
                                </td>
                                <td>
                                    {{movie.rate}}
                                </td>
                                <td>
                                    {{movie.Comment}}
                                </td>
                                <td ng-if="planStatus">
                                    {{movie.status}}
                                </td>
                                <td>
                                    <button ng-click="editPlan($index)" class="btn btn-success btn-sm">
                                        <i class="glyphicon glyphicon-edit"></i>
                                    </button>
                                </td>
                                <td>
                                    <button ng-click="deletePlan($index)" class="btn btn-danger btn-sm">
                                        <i class="glyphicon glyphicon-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr ng-if="movie.isEdit">
                                <td>
                                    {{$index + 1}}
                                </td>
                                <td>
                                    {{movie.title}}
                                </td>
                                <td>
                                    <input class="form-control" ng-model="newDate" type="date">
                                </td>
                                <td>
                                    <select ng-model="movie.rate" class="form-control">
                                        <option>1</option>
                                        <option>2</option>
                                        <option>3</option>
                                        <option>4</option>
                                        <option>5</option>
                                        <option>6</option>
                                        <option>7</option>
                                        <option>8</option>
                                        <option>9</option>
                                        <option>10</option>
                                    </select>
                                </td>
                                <td>
                                    <input class="form-control" ng-model="movie.comment" maxlength="30" type="text">
                                </td>
                                <td>
                                    <select class="form-control" ng-model="movie.status">
                                        <option value="Watched">
                                            Watched
                                        </option>
                                        <option value="Plan to watch">
                                            Plan to watch
                                        </option>
                                    </select>
                                </td>
                                <td>
                                    <button ng-click="savePlan($index)" class="btn btn-success btn-sm">
                                        <i class="glyphicon glyphicon-edit"></i>
                                    </button>
                                </td>
                                <td>
                                    <button ng-click="deletePlan($index)" class="btn btn-danger btn-sm">
                                        <i class="glyphicon glyphicon-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="row" ng-if="list.length == 0">
            <div class="col-md-12">
                <h2>You don't have any movie in your list if you want to search for movies <a href="#/advanceSearch">go here</a></h2>
            </div>
        </div>
    </div>
</div>